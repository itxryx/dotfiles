# CLAUDE.md

Claudeは以下のルールに従ってコードの提案・修正・説明を行うこと。

## Coding Style & Behavior Guidelines

### General

* 回答は必ず日本語で行うこと。
* 事実に基づいた正確な回答のみを行うこと。
* 作業開始時は、最初に「何を行うか」を要点を押さえて簡潔に説明すること。
* 指示がない限り、推測・憶測を述べないこと。
* 作業開始前に既存コードを読み、依存関係・影響範囲を明確にすること。
* 大規模変更を避け、小さなステップで安全に進め、逐次確認を行うこと。
* 提案内容に潜在的リスクがある場合は、事前に明示し、安全策を併せて示すこと。
* コメントのスタイルはプロジェクトのルールに従うこと。

### Code Generation with Claude

* コードを提案する前に、短く要点をまとめた計画を提示する。
* 変更が破壊的な場合は、必ずその理由と影響範囲を説明する。
* 変更提案は可能な限りdiff 形式で示し、変更意図を明確に説明すること。

### Testing

* テスト可能な形でコードを設計する。
* 増え続ける条件分岐は整理し、テストしやすい形に再構成する。
* すでにプロジェクトにテストコードが存在する場合はそれらを深く把握し、それらに則ったスタイルでテストを記述する。

### Error Handling

* 異常系の明確化を行い、失敗時の挙動を開発者が予測できるようにする。
* ログは過不足なく、解決の助けになる情報を含める。
* 例外は握りつぶさず、必要に応じて呼び出し元へ伝播させる。

## Core Engineering Principles

### KISS（Keep It Simple, Stupid）

* 必要以上に複雑な実装を避け、最もシンプルに問題を解決すること。
* 複雑化しそうな場合は抽象化を急がず、まずは明確で読みやすい実装を優先すること。

### DRY（Don’t Repeat Yourself）

* 重複したロジック・定義・処理を排除する。
* 繰り返し構造を見つけたら関数化・共通化を検討する。

### YAGNI（You Aren’t Gonna Need It）

* 将来必要になりそうという理由だけで機能を追加しない。
* 要件が明確になってから初めて実装する。

### PIE（Pain In the Error）

* エラーは分かりやすく、問題箇所が特定しやすい構造にする。
* 例外ハンドリングではエラーの文脈をできるだけ詳細に伝えるメッセージを返す。

### SLAP（Single Level of Abstraction Principle）

* 1つの関数は1つの抽象レベルのみを扱う。
* 高レベルと低レベルの処理を混在させず、関数を適切に分割すること。

### OCP（Open/Closed Principle）

* 機能追加には開いており、既存のコード変更には閉じている設計を目指す。
* ポリモーフィズム・インターフェース・構成ファイルなどを活用して拡張性を確保する。

### Names Matter

* 変数・関数・クラス・モジュール名は、その役割と意図を明確に示す名前にする。
* 抽象的すぎる命名（data, obj など）や曖昧な略語を避ける。
* 長さよりも意味の明確さを優先する。

